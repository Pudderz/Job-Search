(this["webpackJsonpjob-listings"]=this["webpackJsonpjob-listings"]||[]).push([[0],{26:function(e,t,a){},31:function(e,t,a){e.exports=a(49)},36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(28),l=a.n(r),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var i=a(24),u=a(13),m=a(11),d=a(10),p=a(3),h=a(4),v=a(6),b=a(5),f=a(20),E=a(1),g=(a(36),o.a.createContext()),y=function(e){var t=Object(n.useRef)(!1),a=Object(n.useState)({top:"1%"}),r=Object(d.a)(a,2),l=r[0],s=r[1],c=Object(n.useState)({value:""}),i=Object(d.a)(c,2),u=i[0],m=i[1],p=Object(n.useState)({value:""}),h=Object(d.a)(p,2),v=h[0],b=h[1];Object(n.useEffect)((function(){t.current=!0;var e=window.pageYOffset;return window.addEventListener("scroll",(function(a){var n=window.pageYOffset;t.current&&s(e>n?{top:"1%"}:{top:"-200px"}),e=n})),function(){t.current=!1}}),[]);var f=function(e){m({value:e.target.value})},E=function(e){b({value:e.target.value})};return o.a.createElement("div",{id:"search",style:{top:l.top}},o.a.createElement(g.Consumer,null,(function(e){return o.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t,u.value,v.value)}},o.a.createElement("input",{type:"search",onChange:f,value:u.value,required:!0,placeholder:"Search Jobs"}),o.a.createElement("input",{id:"location",type:"search",onChange:E,value:v.value,required:!0,placeholder:"Location"}),o.a.createElement("div",{className:"button"},o.a.createElement("button",{className:"clear",type:"submit"},"Search"),o.a.createElement("button",{className:"clear",type:"button",value:"",onClick:function(e){f(e),E(e)}},"Clear")))})))},w=a(12),S=a.n(w),j=a(19),k=(a(38),a(39),function(e){return"indeed"===e.site||"reed"===e.site?o.a.createElement("a",{href:"https://www.".concat(e.site,".co.uk").concat(e.link),target:"_blank",rel:"noopener noreferrer"},"Link to job"):o.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},"Link to job")}),R=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return o.a.createElement("a",{className:"site",href:"http://www.".concat(this.props.site,".co.uk"),target:"_blank",rel:"noopener noreferrer"},this.props.site)}}]),a}(n.Component),P=a(14),x=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).compare=function(e,t){if(e===t)return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(var o=hasOwnProperty.bind(t),r=0;r<a.length;r++)if(!o(a[r])||e[a[r]]!==t[a[r]])return!1;return!0},n.shouldComponentUpdate=function(e,t){return!n.compare(n.props,e)||!n.compare(n.state,t)},n.componentDidMount=function(){n.state.saved||Object(P.b)("".concat(n.props.jobDetails.company,"_").concat(n.props.jobDetails.position)).then((function(e){void 0!==e&&n.setState({saved:!0})}))},n.saveJob=Object(j.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new Date).setDate(t.getDate()-n.props.jobDetails.time),Object(P.d)("".concat(n.props.jobDetails.company,"_").concat(n.props.jobDetails.position),Object(m.a)(Object(m.a)({},n.props.jobDetails),{},{time:t.getTime(),postedAt:t.toISOString().split("T")[0]})).then((function(){n.setState({saved:!0},(function(){return console.log("saved")}))})).catch((function(e){console.log("error ".concat(e))}));case 3:case"end":return e.stop()}}),e)}))),n.removeJob=Object(j.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(P.a)("".concat(n.props.jobDetails.company,"_").concat(n.props.jobDetails.position)).then((function(){n.setState({saved:!1},(function(){void 0!==n.props.removeCallback&&n.props.removeCallback()}))}));case 1:case"end":return e.stop()}}),e)}))),n.state={saved:n.props.isSaved},n}return Object(h.a)(a,[{key:"render",value:function(){return o.a.createElement("li",{className:"item ".concat(this.props.layout)},o.a.createElement("div",{className:"logo"}),o.a.createElement("div",{className:"grid"},o.a.createElement("div",{className:"features"},o.a.createElement("p",{className:"company"},this.props.jobDetails.company)),o.a.createElement("h2",{className:"jobName"},this.props.jobDetails.position),o.a.createElement("div",{className:"extraInfo"},o.a.createElement("p",null,this.props.jobDetails.postedAt),o.a.createElement("p",null,this.props.jobDetails.location))),o.a.createElement("hr",{className:"lineBreak"}),o.a.createElement("div",{className:"tags"},o.a.createElement("p",null,this.props.jobDetails.summary),!1===this.state.saved&&o.a.createElement("button",{className:"save",onClick:this.saveJob},"Save"),!0===this.state.saved&&o.a.createElement("button",{className:"save",onClick:this.removeJob},"Remove"),o.a.createElement(k,{link:this.props.jobDetails.link,site:this.props.jobDetails.site})),o.a.createElement(R,{site:this.props.jobDetails.site}))}}]),a}(o.a.Component);a(40);function O(e){var t=Object(n.useState)({display:e.display}),a=Object(d.a)(t,2),r=a[0],l=a[1],s=Object(n.useRef)("none"),c=Object(n.useRef)(0);return Object(n.useEffect)((function(){console.log(e.display),console.log(s.current),"none"===e.display?c.current=setTimeout((function(){return l({display:"none"})}),3e3):"block"===e.display&&(clearTimeout(c.current),"block"!==r.display&&l({display:"block"}))}),[e.info,e.display]),o.a.createElement("div",{className:"loadBarDetails",style:{display:r.display}},o.a.createElement("p",null,e.info))}var C=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return o.a.createElement(g.Consumer,null,(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"loadBar",style:{display:e.state.displayLoadbar}},o.a.createElement("div",{style:{width:"".concat(e.state.loadBarProgress,"%")}})),o.a.createElement(O,{info:e.state.info,display:e.state.displayLoadbar}))}))}}]),a}(n.Component);a(41),a(26);function I(e){var t=Object(n.useRef)({indeed:!0,jobSite:!0,reed:!0}),a=Object(n.useRef)(""),r=function(n){var o,r=""===a.current?n.target.value:n.target.value.toLowerCase().trim();o=e.jobResults.filter((function(e){console.log(e.company,e.position),console.log("undefined"!=typeof e.company),console.log(typeof e.company),console.log(void 0!==typeof e.position);var a="undefined"!=typeof e.company&&e.company.toLowerCase().includes(r);return(void 0!==typeof e.position&&e.position.toLowerCase().includes(r)||a)&&!0===t.current[e.site]})),e.changeJobs(o),a.current=n.target.value},l=function(e){console.log(e.target.value),t.current[e.target.value]=e.target.checked,console.log(e.target.checked),r({target:{value:a.current}})};Object(n.useEffect)((function(){var e=document.getElementById("list1");e.getElementsByClassName("anchor")[0].onclick=function(t){e.classList.contains("visible")?e.classList.remove("visible"):e.classList.add("visible")}}),[]);return o.a.createElement(o.a.Fragment,null,"  ",o.a.createElement("label",{style:{margin:"5px"}},"Filter Results by:",o.a.createElement("input",{type:"text",id:"filterSearchBar",onChange:r,style:{width:"auto"},placeholder:"Filter Results"})),o.a.createElement("div",{className:"filterSites"},o.a.createElement("div",{id:"list1",className:"dropdown-check-list",tabIndex:"100"},o.a.createElement("span",{className:"anchor"},"Filter by Sites"),o.a.createElement("ul",{className:"items"},o.a.createElement("li",null,o.a.createElement("input",{type:"checkbox",onChange:l,style:{backgroundColor:"white",width:"auto"},value:"jobSite",defaultChecked:!0}),"JobSite"),o.a.createElement("li",null,o.a.createElement("input",{type:"checkbox",onChange:l,style:{backgroundColor:"white",width:"auto"},value:"reed",defaultChecked:!0}),"Reed "),o.a.createElement("li",null,o.a.createElement("input",{type:"checkbox",onChange:l,style:{backgroundColor:"white",width:"auto"},value:"indeed",defaultChecked:!0}),"Indeed "))),o.a.createElement("select",{className:"layout",onChange:function(t){console.log("changing"),"row"===t.target.value?e.changeLayout("",""):"columnSmall"===t.target.value?e.changeLayout("colSmallUl","colSmallLi"):"columnLarge"===t.target.value&&e.changeLayout("colSmallUl","colMedLi")}},o.a.createElement("option",{value:"row",key:"row"},"Row"),o.a.createElement("option",{value:"columnSmall",key:"colSmall"},"Column Small"),o.a.createElement("option",{value:"columnLarge",key:"colLarge"},"Column medium"))))}function D(){return o.a.createElement(g.Consumer,null,(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"clear",onClick:e.showAdvanced,style:{textDecoration:"underline"}},"Advance search options"),o.a.createElement("label",{id:"sortBy",htmlFor:"searchtype"},"Sort by:",o.a.createElement("select",{value:e.state.sortBy,name:"options",id:"searchBy",onChange:e.sortBy},o.a.createElement("option",{value:"id",defaultValue:!0},"ID"),o.a.createElement("option",{value:"time"},"Time"))),o.a.createElement(I,{jobResults:e.state.initialResults,changeJobs:e.onFilter,changeLayout:e.changeLayout}),o.a.createElement("hr",null))}))}a(42);function J(){return o.a.createElement("div",{className:"scrollTo"},o.a.createElement("button",{id:"top",onClick:function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42.67 64"},o.a.createElement("defs",null),o.a.createElement("title",null,"Asset 45"),o.a.createElement("g",{id:"Layer_2","data-name":"Layer 2"},o.a.createElement("g",{id:"Layer_1-2","data-name":"Layer 1"},o.a.createElement("path",{className:"cls-1",d:"M19.57.78.78,19.5a2.67,2.67,0,0,0,3.77,3.78L18.67,9.21V61.33a2.67,2.67,0,1,0,5.33,0V9L38.11,23.27a2.67,2.67,0,1,0,3.78-3.76L23.35.79a2.67,2.67,0,0,0-3.78,0Z"}))))),o.a.createElement("button",{id:"bottom",onClick:function(){window.scrollTo({top:document.documentElement.scrollHeight,left:0,behavior:"smooth"})}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42.67 64"},o.a.createElement("defs",null),o.a.createElement("title",null,"Asset 44"),o.a.createElement("g",{id:"Layer_2","data-name":"Layer 2"},o.a.createElement("g",{id:"Layer_1-2","data-name":"Layer 1"},o.a.createElement("path",{className:"cls-1",d:"M23.1,63.22,41.88,44.5a2.67,2.67,0,1,0-3.76-3.78L24,54.79V2.67a2.67,2.67,0,1,0-5.33,0V55L4.56,40.73a2.67,2.67,0,0,0-3.77,0A2.63,2.63,0,0,0,0,42.61a2.68,2.68,0,0,0,.77,1.88L19.32,63.21a2.67,2.67,0,0,0,3.78,0Z"}))))))}var L=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).changeExtraParameters=function(t){var a=t.target.value,n=t.target.parentElement.parentElement.parentElement.childNodes[0].childNodes[0].textContent,o=t.target.getAttribute("name");console.log(n,o,a),e.props.changeExtraParametersInfo(n,o,a)},e.showIndeed=function(){e.setState({showIndeed:"block"===e.state.showIndeed?"none":"block",indeedButton:"block"===e.state.showIndeed?"Show":"Hide"})},e.showReed=function(){e.setState({showReed:"block"===e.state.showReed?"none":"block",reedButton:"block"===e.state.showReed?"Show":"Hide"})},e.showJobsite=function(){e.setState({showJobsite:"block"===e.state.showJobsite?"none":"block",jobSiteButton:"block"===e.state.showJobsite?"Show":"Hide"})},e.onSubmit=function(e){e.preventDefault()},e.showExtra=function(t){e.setState(Object(u.a)({},t.target.value,t.target.checked?"grid":"none"))},e.state={styleClass:"",showIndeed:"none",showJobsite:"none",showReed:"none",indeedButton:"Show",reedButton:"Show",jobSiteButton:"Show"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(g.Consumer,null,(function(t){return o.a.createElement("div",{id:"frontPage",className:t.state.showAdvanced},o.a.createElement("div",{id:"formDiv"},o.a.createElement("form",{id:"form",onSubmit:e.onSubmit},o.a.createElement("h3",null,"Advance search options"),o.a.createElement("label",{htmlFor:"searchBy"},"Search Website by:",o.a.createElement("select",{name:"options",id:"searchBy",onChange:t.searchBy,value:t.state.searchBy},o.a.createElement("option",{value:"R"},"Most Relevant"),o.a.createElement("option",{value:"DD"},"Most Recent"))),o.a.createElement("label",{htmlFor:"websites",style:{fontWeight:"600",marginTop:"15px"}},"Which Websites:"),o.a.createElement("div",{className:"whichSite card"},o.a.createElement("label",{htmlFor:"indeed"},"Indeed:",o.a.createElement("input",{type:"checkBox",name:"websites",id:"indeed",value:"Indeed",onChange:function(a){t.loadIndeed(a),e.showExtra(a)},checked:t.state.loadIndeed})),o.a.createElement("label",{htmlFor:"reed"},"Reed:",o.a.createElement("input",{type:"checkBox",name:"websites",id:"reed",value:"Reed",onChange:function(a){t.loadReed(a),e.showExtra(a)},checked:t.state.loadReed})),o.a.createElement("label",{htmlFor:"jobsite"},"Jobsite:",o.a.createElement("input",{type:"checkBox",name:"websites",id:"jobsite",value:"Jobsite",onChange:function(a){t.loadJobSite(a),e.showExtra(a)},checked:t.state.loadJobSite}))),o.a.createElement("h2",null,"Extra Parameters"),o.a.createElement("div",{className:"options extraParameters"},o.a.createElement("div",{className:"card",style:{display:e.state.Indeed}},o.a.createElement("div",{className:"extraParaheader"},o.a.createElement("h5",null,"Indeed"),o.a.createElement("button",{type:"button",className:"clear",onClick:e.showIndeed},e.state.indeedButton)),o.a.createElement("div",{className:"extraDetails",style:{display:e.state.showIndeed}},o.a.createElement("label",null,"DatePosted:",o.a.createElement("select",{name:"Date",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.Indeed.Date},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"1"},"Past 24 hours"),o.a.createElement("option",{value:"7"},"Past week"),o.a.createElement("option",{value:"14"},"Past 2 weeks"))),o.a.createElement("label",null,"Job Type:",o.a.createElement("select",{name:"Job",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.Indeed.Job},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"temporary"},"Temporary"),o.a.createElement("option",{value:"fulltime"},"FullTime"),o.a.createElement("option",{value:"parttime"},"Part-Time"))),o.a.createElement("label",null,"Radius:",o.a.createElement("select",{name:"Rad",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.Indeed.Rad},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"0"},"0"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"10"},"10"),o.a.createElement("option",{value:"15"},"15"),o.a.createElement("option",{value:"25"},"25"),o.a.createElement("option",{value:"50"},"50"),o.a.createElement("option",{value:"100"},"100"))),o.a.createElement("label",null,"Minimum Salary: ",t.state.extraParametersInfo.Indeed.Sal,o.a.createElement("input",{name:"Sal",type:"range",min:0,max:110,step:1,value:"none"===t.state.extraParametersInfo.Indeed.Sal?0:+t.state.extraParametersInfo.Indeed.Sal/1e3,onChange:e.changeExtraParameters})))),o.a.createElement("div",{className:"card",style:{display:e.state.Jobsite}},o.a.createElement("div",{className:"extraParaheader"},o.a.createElement("h5",null,"JobSite"),o.a.createElement("button",{className:"clear",onClick:e.showJobsite},e.state.jobSiteButton)),o.a.createElement("div",{className:"extraDetails",style:{display:e.state.showJobsite}},o.a.createElement("label",null,"DatePosted:",o.a.createElement("select",{name:"Date",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.JobSite.Date},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"1"},"Past 24 hours"),o.a.createElement("option",{value:"3"},"Past 3 days"),o.a.createElement("option",{value:"7"},"Past week"),o.a.createElement("option",{value:"14"},"Past 2 weeks"))),o.a.createElement("label",null,"Job Type:",o.a.createElement("select",{name:"Job",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.JobSite.Job},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"temporary"},"Temporary"),o.a.createElement("option",{value:"permanent"},"FullTime"),o.a.createElement("option",{value:"part-time"},"Part-Time"))),o.a.createElement("label",null,"Radius:",o.a.createElement("select",{name:"Rad",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.JobSite.Rad},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"0"},"0"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"10"},"10"),o.a.createElement("option",{value:"20"},"20"),o.a.createElement("option",{value:"30"},"30"))),o.a.createElement("label",null,"Minimum Salary: ",t.state.extraParametersInfo.JobSite.Sal,o.a.createElement("input",{name:"Sal",type:"range",min:0,max:110,step:10,value:"none"===t.state.extraParametersInfo.JobSite.Sal?0:+t.state.extraParametersInfo.JobSite.Sal/1e3,onChange:e.changeExtraParameters})))),o.a.createElement("div",{className:"card",style:{display:e.state.Reed}},o.a.createElement("div",{className:"extraParaheader"},o.a.createElement("h5",null,"Reed"),o.a.createElement("button",{className:"clear",onClick:e.showReed},e.state.reedButton)),o.a.createElement("div",{className:"extraDetails",style:{display:e.state.showReed}},o.a.createElement("label",null,"DatePosted:",o.a.createElement("select",{name:"Date",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.Reed.Date},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"Today"},"Past 24 hours"),o.a.createElement("option",{value:"LastThreeDays"},"Past 3 days"),o.a.createElement("option",{value:"LastWeek"},"Past week"),o.a.createElement("option",{value:"LastTwoWeeks"},"Past 2 weeks"))),o.a.createElement("label",null,"Job Type:",o.a.createElement("select",{name:"Job",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.Reed.Job},o.a.createElement("option",{value:"none"},"All"),o.a.createElement("option",{value:"temp"},"Temporary"),o.a.createElement("option",{value:"perm"},"Permanent"),o.a.createElement("option",{value:"fulltime"},"FullTime"),o.a.createElement("option",{value:"parttime"},"Part-Time"),o.a.createElement("option",{value:"contract"},"Contract"))),o.a.createElement("label",null,"Radius:",o.a.createElement("select",{name:"Rad",onChange:e.changeExtraParameters,value:t.state.extraParametersInfo.Reed.Rad},o.a.createElement("option",{value:"none",defaultValue:!0},"All"),o.a.createElement("option",{value:"0"},"0"),o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"10"},"10"),o.a.createElement("option",{value:"20"},"20"),o.a.createElement("option",{value:"30"},"30"),o.a.createElement("option",{value:"50"},"50"))),o.a.createElement("label",null,"Minimum Salary: ",t.state.extraParametersInfo.Reed.Sal,o.a.createElement("input",{name:"Sal",type:"range",min:0,max:110,step:2,value:"none"===t.state.extraParametersInfo.Reed.Sal?0:+t.state.extraParametersInfo.Reed.Sal/1e3,onChange:e.changeExtraParameters}))))),o.a.createElement("button",{type:"submit",className:"clear",id:"formSubmit",onClick:t.resetOptions},"Reset"))))}))}}]),a}(n.Component),N=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleFormChange=function(t,a,n){e.props.changeExtraParametersInfo(t,a,n)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"select"},o.a.createElement("div",{id:"headerBackground"}),o.a.createElement(y,null),o.a.createElement(C,null),o.a.createElement(D,null)),o.a.createElement(L,{changeExtraParametersInfo:this.handleFormChange}),o.a.createElement("ul",{className:"listOfJobs ".concat(this.props.widthResults," ").concat(this.props.layout[0])},this.props.jobResults.length>=0&&this.props.jobResults.map((function(t){return o.a.createElement(x,{key:t.id,jobDetails:t,isSaved:!1,layout:e.props.layout[1]})})),0===this.props.jobResults.length&&o.a.createElement("div",null,o.a.createElement("p",null,"There's nothing here"))),o.a.createElement(J,null))}}]),a}(o.a.Component),B=a(29),A=(a(43),function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).componentDidMount=Object(j.a)(S.a.mark((function t(){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],Object(P.c)().then((function(t){var n,o=Object(B.a)(t);try{var r=function(){var t=n.value;console.log(t),Object(P.b)(t).then((function(e){e.id=t,a.push(e)})).then((function(){e.setState({savedJobs:a,initialResults:a})}))};for(o.s();!(n=o.n()).done;)r()}catch(l){o.e(l)}finally{o.f()}}));case 2:case"end":return t.stop()}}),t)}))),e.removeItem=function(t){var a=e.state.savedJobs.filter((function(e){return e.id!==t}));e.setState({savedJobs:a})},e.onFilter=function(t){e.setState({savedJobs:t})},e.changeLayout=function(t,a){console.log("changing Layout ".concat(t," ").concat(a)),e.setState({layout:[t,a]},(function(){console.log("layout changed ".concat(e.state.layout))}))},e.state={savedJobs:[],initialResults:[],layout:["",""]},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return window.indexedDB?o.a.createElement("div",null,o.a.createElement("div",{id:"headerBackground"}),o.a.createElement("div",{id:"savedFilter"},o.a.createElement("h1",null,"Saved Jobs"),o.a.createElement(I,{jobResults:this.state.initialResults,changeJobs:this.onFilter,changeLayout:this.changeLayout})),o.a.createElement("hr",null),o.a.createElement("ol",{id:"savedResults",className:this.state.layout[0]},this.state.savedJobs.map((function(t){return o.a.createElement(x,{key:t.id,jobDetails:t,removeCallback:function(a){return e.removeItem(t.id)},isSaved:!0,layout:e.state.layout[1]})}))),o.a.createElement(J,null)):o.a.createElement("div",null,o.a.createElement("div",{id:"headerBackground"}),o.a.createElement("p",null,"You have no Jobs Saved due to IndexedDb not being supported on your browser."))}}]),a}(n.Component)),T=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).loadJobs=function(e,t){var a={reed:!n.state.loadReed,jobSite:!n.state.loadJobSite,indeed:!n.state.loadIndeed},o=new URL("http://job-puppeteer-scraper.herokuapp.com/stream");for(var r in o.searchParams.set("q",e),o.searchParams.set("location",t),o.searchParams.set("indeed",n.state.loadIndeed),o.searchParams.set("reed",n.state.loadReed),o.searchParams.set("jobsite",n.state.loadJobSite),"R"!==n.state.sortBy&&o.searchParams.set("sortby",n.state.searchBy),n.state.extraParametersInfo)if(!0===n.state["load".concat(r)])for(var l=0,s=Object.entries(n.state.extraParametersInfo[r]);l<s.length;l++){var c=Object(d.a)(s[l],2),i=c[0],u=c[1];"none"!==u&&(console.log("".concat(r.slice(0,1).toLowerCase()).concat(i),u),o.searchParams.set("".concat(r.slice(0,1).toLowerCase()).concat(i),u))}console.log(o),o=prompt("Whats the new url?",o);var m=new EventSource(o),p=[],h=!1;n.isDownloading=!0,n.setState({displayLoadbar:"block",loadBarProgress:1,info:"sending..."}),setTimeout((function(){!1===h&&(console.log("error loading"),n.setState({info:"Connection Error, Closing connection",displayLoadbar:"none"}),m.removeEventListener("error",(function(e){a["".concat(e.data)]=!0,console.log("server could not load ".concat(e.data))})),m.removeEventListener("newData",(function(e){return v(e)})),m.removeEventListener("close",(function(e){return b(e)})),m.close())}),12e3),m.onopen=function(){console.log("Sse connection opened"),h=!0,n.setState({jobResults:[],loadBarProgress:22,info:"Connection established"},(function(){n.isDownloading=!1}))},m.onerror=function(e){console.log("error occured "+e.eventPhase),n.setState({info:"Error occured while scrapping"})};var v=function(e){p.push(JSON.parse(e.data)),n.setState({jobResults:p,initialResults:p,loadBarProgress:n.state.loadBarProgress+2})},b=function e(t){a["".concat(t.data)]=!0,console.log("".concat(t.data," finished")),n.setState({info:"".concat(t.data," complete")}),console.log(a),a.indeed&&a.reed&&a.jobSite&&(console.log("closing connection"),m.close(),n.setState({loadBarProgress:100,displayLoadbar:"none",info:"Scraping complete",jobResults:n.quickSortData(n.state.jobResults,n.state.sortBy)})),m.removeEventListener("error",(function(e){a["".concat(e.data)]=!0,console.log("server could not load ".concat(e.data))})),m.removeEventListener("newData",(function(e){return v(e)})),m.removeEventListener("close",(function(t){return e(t)}))};m.addEventListener("newData",(function(e){return v(e)})),m.addEventListener("error",(function(e){a["".concat(e.data)]=!0,console.log("server could not load ".concat(e.data))})),m.addEventListener("close",(function(e){return b(e)}))},n.sortData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.jobResults;n.setState({jobResults:n.quickSortData(e,n.state.sortBy)})},n.changeExtraParametersInfo=function(e,t,a){console.log(t,a,typeof a),n.setState({extraParametersInfo:Object(m.a)(Object(m.a)({},n.state.extraParametersInfo),{},Object(u.a)({},e,Object(m.a)(Object(m.a)({},n.state.extraParametersInfo[e]),{},Object(u.a)({},t,"Sal"===t?0===+a?"none":"".concat(1e3*a):a))))},(function(){console.log(n.state)}))},n.showAdvanced=function(){n.setState({showAdvanced:"inline-block"===n.state.showAdvanced?"none":"inline-block",widthResults:"inline-block"===n.state.showAdvanced?"show":"hide"})},n.isDownloading=!1,n.state={layout:["",""],initialResults:[],jobResults:[],searchValue:"",locationValue:"",displayLoadbar:"none",loadBarProgress:0,loadIndeed:!0,loadReed:!0,loadJobSite:!0,sortBy:"id",searchBy:"R",info:"",extraParametersInfo:{Indeed:{Date:"none",Job:"none",Rad:"none",Sal:"none"},Reed:{Date:"none",Job:"none",Rad:"none",Sal:"none"},JobSite:{Date:"none",Job:"none",Rad:"none",Sal:"none"}},showAdvanced:"none",widthResults:"show"},n}return Object(h.a)(a,[{key:"quickSortData",value:function(e,t){if(e.length<=1)return e;for(var a=e[e.length-1][t],n=[],o=[],r=0;r<e.length-1;r++)+e[r][t]<=a?n.push(e[r]):o.push(e[r]);return[].concat(Object(i.a)(this.quickSortData(n,t)),[e[e.length-1]],Object(i.a)(this.quickSortData(o,t)))}},{key:"render",value:function(){var e=this;return o.a.createElement(f.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(f.b,{to:"/"},"Job Results")),o.a.createElement("li",null,o.a.createElement(f.b,{to:"/saved"},"Saved Jobs")))),o.a.createElement(g.Provider,{value:{state:this.state,changeSearchValue:function(t){return e.setState({searchValue:t.target.value})},changeLocationValue:function(t){return e.setState({locationValue:t.target.value})},clearValues:function(){e.setState({searchValue:"",locationValue:""})},showAdvanced:function(t){e.showAdvanced(t)},resetOptions:function(){e.setState({extraParametersInfo:{Indeed:{Date:"none",Job:"none",Rad:"none",Sal:"none"},Reed:{Date:"none",Job:"none",Rad:"none",Sal:"none"},JobSite:{Date:"none",Job:"none",Rad:"none",Sal:"none"}}})},onFilter:function(t){return e.sortData(t)},onSubmit:function(t,a,n){t.preventDefault(),console.log(a,n),e.loadJobs(a,n)},searchBy:function(t){e.setState({searchBy:t.target.value})},sortBy:function(t){e.setState({sortBy:t.target.value,jobResults:e.quickSortData(e.state.jobResults,t.target.value)})},loadIndeed:function(t){return e.setState({loadIndeed:t.target.checked})},loadJobSite:function(t){return e.setState({loadJobSite:t.target.checked})},loadReed:function(t){return e.setState({loadReed:t.target.checked})},changeLayout:function(t,a){e.setState({layout:[t,a]})}}},o.a.createElement(E.c,null,o.a.createElement(E.a,{path:"/saved"},o.a.createElement(A,null)),o.a.createElement(E.a,{path:"/"},o.a.createElement(N,{jobResults:this.state.jobResults,changeExtraParametersInfo:this.changeExtraParametersInfo,widthResults:this.state.widthResults,layout:this.state.layout}))))))}}]),a}(o.a.Component);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(T,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");s?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):c(t,e)}))}}()}},[[31,1,2]]]);
//# sourceMappingURL=main.96627126.chunk.js.map