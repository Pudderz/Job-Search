(this["webpackJsonpjob-listings"]=this["webpackJsonpjob-listings"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),s=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(5),l=a(1),i=a(2),u=a(4),h=a(3),p=(a(13),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).changeSearch=function(e){n.setState({value:e.target.value})},n.changeLocation=function(e){n.setState({location:e.target.value})},n.onSubmit=function(e){e.preventDefault(),n.props.onSearchChange(n.state.value,n.state.location)},n.state={value:"",location:""},n}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"search"},o.a.createElement("form",null,o.a.createElement("input",{type:"search",onChange:this.changeSearch,required:!0,placeholder:"Search Jobs"}),o.a.createElement("input",{id:"location",type:"search",onChange:this.changeLocation,required:!0,placeholder:"Location"}),o.a.createElement("div",{className:"button"},o.a.createElement("button",{className:"clear",type:"submit",onClick:this.onSubmit},"Search"),o.a.createElement("input",{className:"clear",type:"button",value:"Clear",onClick:this.changeSearch}))))}}]),a}(n.Component)),m=(a(14),a(15),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return"indeed"===this.props.site?o.a.createElement("a",{href:"https://www.indeed.co.uk".concat(this.props.link),target:"_blank",rel:"noopener noreferrer"},"Link to site"):o.a.createElement("a",{href:this.props.link,target:"_blank",rel:"noopener noreferrer"},"Link to site")}}]),a}(n.Component)),d=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("li",{className:"item"},o.a.createElement("div",{className:"logo"}),o.a.createElement("div",{className:"grid"},o.a.createElement("div",{className:"features"},o.a.createElement("p",{className:"company"},this.props.jobDetails.company)),o.a.createElement("h2",{className:"jobName"},this.props.jobDetails.position),o.a.createElement("div",{className:"extraInfo"},o.a.createElement("p",null,this.props.jobDetails.postedAt),o.a.createElement("p",null,this.props.jobDetails.location))),o.a.createElement("hr",{className:"lineBreak"}),o.a.createElement("div",{className:"tags"},o.a.createElement("p",null,this.props.jobDetails.summary),o.a.createElement("button",{className:"save",onClick:console.log("save")},"Save"),o.a.createElement(m,{link:this.props.jobDetails.link,site:this.props.jobDetails.site}),o.a.createElement("p",{className:"site"},this.props.jobDetails.site)))}}]),a}(o.a.Component),b=(a(16),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"loadBar",style:{display:this.props.show}},o.a.createElement("div",{style:{width:"".concat(this.props.progress,"%")}}))}}]),a}(n.Component)),f=(a(17),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).loadJobs=function(e,t){var a=!1,o=!1,r=new URL("stream","https://job-puppeteer-scrape.herokuapp.com/");r.searchParams.set("q",e),r.searchParams.set("location",t);var s=new EventSource(r);n.setState({displayLoadbar:"block",loadBarProgress:1}),s.onopen=function(){console.log("Sse connection opened"),n.setState({jobResults:[],loadBarProgress:22})},s.onerror=function(e){console.log("error occured "+JSON.stringify(e)),s.close()},s.addEventListener("newData",(function(e){console.log("received"),console.log(e.data),console.log(n.state.jobResults),n.state.jobResults.push(JSON.parse(e.data)),n.setState({jobResults:n.state.jobResults,loadBarProgress:n.state.loadBarProgress+2})})),s.addEventListener("close",(function(e){"indeed"===e.data?o=!0:"linkedIn"===e.data&&(a=!0),a&&o&&(s.close(),console.log("closing connection"),n.setState({loadBarProgress:100,displayLoadbar:"none"}))}))},n.searchChange=function(e,t){n.setState({searchValue:e},(function(){n.loadJobs(e,t)}))},n.sortData=function(){n.setState({jobResults:n.quickSortData(n.state.jobResults,"time")})},n.tagClick=function(e){n.searchChange("".concat(n.state.searchValue," ").concat(e))},n.state={jobResults:[],searchValue:"",displayLoadbar:"none",loadBarProgress:0},n}return Object(i.a)(a,[{key:"quickSortData",value:function(e){if(e.length<=1)return e;for(var t=e[e.length-1].time,a=[],n=[],o=0;o<e.length-1;o++)void 0===typeof e[o].time||+e[o].time<=t?a.push(e[o]):n.push(e[o]);return[].concat(Object(c.a)(this.quickSortData(a)),[e[e.length-1]],Object(c.a)(this.quickSortData(n)))}},{key:"render",value:function(){return o.a.createElement("main",null,o.a.createElement("div",{id:"headerBackground"}),o.a.createElement(p,{value:this.state.searchValue,onSearchChange:this.searchChange}),o.a.createElement(b,{progress:this.state.loadBarProgress,show:this.state.displayLoadbar}),o.a.createElement("button",{onClick:this.sortData},"Sort Data"),o.a.createElement("ul",null,this.state.jobResults.map((function(e){return o.a.createElement(d,{key:e.id,jobDetails:e})}))))}}]),a}(o.a.Component));a(18),n.Component;s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.a36a5436.chunk.js.map